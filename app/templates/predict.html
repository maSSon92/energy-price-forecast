{% extends "base.html" %}

{% block title %}Prognozuj cenÄ™ energii{% endblock %}

{% block content %}
<h1>ğŸ”Œ Prognozuj cenÄ™ energii elektrycznej</h1>

<form method="post" class="form">
    <label for="day">ğŸ“… DzieÅ„:</label>
    <input type="number" id="day" name="day" min="1" max="31" required>

    <label for="month">ğŸ“† MiesiÄ…c:</label>
    <input type="number" id="month" name="month" min="1" max="12" required>

    <label for="mode">Zakres prognozy:</label>
    <select name="mode" id="mode" required>
        <option value="hour">Konkretna godzina</option>
        <option value="day">CaÅ‚y dzieÅ„ (00â€“23)</option>
    </select>

    <div id="hour-input">
        <label for="hour">ğŸ•’ Godzina (0-23):</label>
        <input type="number" id="hour" name="hour" min="0" max="23">
    </div>

    <button type="submit">ğŸ” Prognozuj</button>
</form>

<script>
  const modeSelector = document.getElementById('mode');
  const hourInput = document.getElementById('hour-input');
  modeSelector.addEventListener('change', () => {
    hourInput.style.display = modeSelector.value === 'hour' ? 'block' : 'none';
  });

  window.onload = () => {
    hourInput.style.display = modeSelector.value === 'hour' ? 'block' : 'none';
  };
</script>

<h3>ğŸ“‰ Prognozy godzinowe:</h3>
{% if day_predictions %}
<div class="tabela-container">
    <table class="tabela-prognoz">
        <thead>
            <tr>
                <th>Godzina</th>
                <th>Fixing I (PLN/MWh)</th>
                <th>Fixing II (PLN/MWh)</th>
            </tr>
        </thead>
        <tbody>
            {% for row in day_predictions %}
            <tr>
                <td>{{ row["Godzina"] }}</td>
                <td>{{ row["Fixing I"] }}</td>
                <td>{{ row["Fixing II"] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}


{% if error %}
    <div class="error">âš ï¸ {{ error }}</div>
{% endif %}

<a href="https://www.youtube.com/watch?v=OAn40128fy8" target="_blank" class="yt-btn">â–¶ï¸ Obejrzyj na YouTube</a>
{% endblock %}